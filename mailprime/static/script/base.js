// Generated by CoffeeScript 1.6.3
var checkformap, checkfornotice, loaddatepicker, populate_region_map;

$(function() {
  checkfornotice();
  loaddatepicker();
  return checkformap();
});

checkfornotice = function() {
  if ($("#notice_wrapper").length) {
    $("#notice_wrapper").hide();
    setTimeout((function() {
      $("#notice_wrapper").slideToggle("fast");
    }), 300);
    return setTimeout((function() {
      $("#notice_wrapper").slideToggle("fast");
    }), $(".notice").length * 2500);
  }
};

loaddatepicker = function() {
  if ($("#id_deploy_date").length) {
    return $("#id_deploy_date").datepicker();
  }
};

checkformap = function() {
  if ($("#geo_region_map").length) {
    return google.load("visualization", "1", {
      packages: ["geochart"],
      callback: populate_region_map
    });
  }
};

populate_region_map = function() {
  var campaign, message, username;
  message = $("#geo_region_map").attr('mess-data');
  username = $("#geo_region_map").attr('user-data');
  campaign = $("#geo_region_map").attr('camp-data');
  return $.ajax({
    type: "GET",
    url: "http://127.0.0.1:8000/api/" + username + "/c-" + campaign + "/m-" + message + "/region_data.json",
    success: function(results) {
      var chart, data, options;
      options = {
        width: 500,
        height: 500
      };
      data = google.visualization.arrayToDataTable(results);
      chart = new google.visualization.GeoChart(document.getElementById('geo_region_map'));
      chart.draw(data, options);
    }
  });
};
